<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="/css/styles.css"/>
  </head>
  <body>
    <header>
      <nav>
        <ol class="logo">
          <li>
            <a href="/">
              <img src="/media/brightdigit-name.svg"/>
            </a>
          </li>
        </ol>
        <ol class="menu">
          <li>
            <a href="/services">Services</a>
          </li>
          <li>
            <a href="/products">Products</a>
          </li>
          <li>
            <a href="/articles">Articles</a>
          </li>
          <li>
            <a href="/development">Development</a>
          </li>
        </ol>
        <ol class="menu">
          <li>
            <a href="/podcast">Podcast</a>
          </li>
          <li>
            <a href="/newsletters">Newsletters</a>
          </li>
          <li>
            <a href="/sponsorship">Sponsorship</a>
          </li>
          <li>
            <a href="/about">About</a>
          </li>
        </ol>
        <ol class="more">
          <li>
            <a href="/#menu">Menu</a>
          </li>
        </ol>
      </nav>
    </header>
    <main>
      <article>
        <div class="content"><p>With WWDC 2018, Swift 4.2 <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0202-random-unification.md">has introduced</a> new ways to generate and access random values from a collection. Often times, app developers will do this when building games or creating test data. Let's take a look at the old way and the new way to access random items.</p><h2>Random Access and Legacy APIs</h2><p>In the beginning, Swift was dependent on old system-level C libraries to generate random numbers. On Apple devices, this is done through the Darwin function <code>arc4random_uniform</code>. While it does do what you want, it requires a lot of work for types besides <code>UInt32</code>. For instance if you need to build a floating-point number, you would need to:</p><p>let minimum = -7.9</p><p>let maximum = 12.8</p><p>let doubleValue = (Double(arc4random<em>uniform(UInt32.max)) / Double(UInt32.max)) </em> (maximum - minimum) + minimum</p><p>This has led several developers to build packages to simplify this process.</p><h2>RandomKit and Simplifying Random Generation</h2><p><a href="https://github.com/nvzqz/RandomKit">RandomKit is one library</a> which has done a great job simplifying that. Each simple type has a static function for generating a value based on a type of generator supplied:</p><p>let value = Int.random(using: &amp;Xoroshiro.default)</p><p>A generator implements the <code>RandomGenerator</code> protocol which provides the implementation needed to generate a value. RandomKit also supplies methods for:</p><ul><li>picking random values from an Array</li><li>shuffling Arrays</li><li>generating other types like Date, (NS/UI)Color, CGPoint and more</li></ul><h2>Swift 4.2 and WWDC 2018</h2><p>Proposal <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0202-random-unification.md">SE-0202</a> seems to be fixing a lot of the inconsistencies which come with random generation and access across operating system (Linux vs macOS) as well as simplifying the API. It also seems to be taking an approach similar to RandomKit. For instance to generate a random Double within a range, all that needs to be done is:</p><p>Double.random(in: -7.9...12.8)</p><p>No more conversions or calculations need to take place. Like RandomKit, a <a href="https://developer.apple.com/documentation/swift/randomnumbergenerator"><code>RandomNumberGenerator</code></a> can be supplied as an argument which customizes the way the number is generated. Also like RandomKit, a random element can be selected with <a href="https://developer.apple.com/documentation/swift/array/2994747-randomelement"><code>Array.randomElement</code></a>.</p><h2>Conclusion</h2><p>It seems like a majority of the improvements which were needed for random generation and access have been implemented. There is still room for more complex libraries like RandomKit and the hope is that they implement these new APIs in the future. In the future it's best to use the new APIs and avoid needed the legacy APIs for random number generation in your app or tests.</p></div>
        <span>Tagged with: </span>
      </article>
    </main>
    <footer>
      <div class="address">5859 W Saginaw #182 Lansing MI 48917</div>
      <div class="copyright">© Bright Digit, LLC 2021</div>
    </footer>
  </body>
</html>